@model List<CV>

@{
    ViewData["Title"] = "Startsida";
}

<div class="text-center">
    <h1 class="display-4">Välkommen</h1>

    
</div>

<h2>Utvalda CVn:</h2>
<div class="d-md-inline-flex">
@if (Model == null || !Model.Any())
{
    <p>Finns inga CV</p>
}
else
{
    @foreach (CV cV in Model)
    {
        <div class="border border-dark" style="width: 220px">
            <img style="width: 200px; height: 200px; border-radius: 50%;" src="@cV.Users.ProfilePicturePath" alt="Alternate Text" />
            <br />
            <label>Användare: </label>
            @if (cV.Users != null)
            {
                <p>@cV.Users.Firstname @(" ") @cV.Users.Lastname</p>
            }
           
            <label>Titel: </label>
            <p>@cV.Header</p>
            
            <label>Innehåll: </label>
            <p>@cV.Content</p>
            
            <label>Tidigare erfarenheter: </label>
            <p>@cV.PreviousExperience</p>
            
            <label>Utbildning: </label>
            <p>@cV.Education</p>
            
            <label>Kompetenser: </label>
            <p>@cV.Competence</p>

                <a asp-controller="Account" asp-action="OtherProfile" asp-route-searchUser="(@cV.Users.UserName)"><button>Visa profil</button></a>
            
        </div>
    }
}
</div>

<h2>Senaste projektet: </h2>
<div>
    @if (Model == null || !Model.Any())
{
        <p>Finns inga CV</p>
    }
    else
    {
        int highestID = 0;
        Project latestProject = null;
        @foreach (CV cV in Model)
        {

            foreach(Project project in cV.Users.Projects)
            {
                
                if (project.ProjectID > highestID)
                {
                    highestID = project.ProjectID;
                    latestProject = project;
                }
                
            }
        }
        <div class="border border-dark">
        <label>Titel: </label>
        <p>@latestProject.Titel</p>
        <label>Beskrivning: </label>
        <p>@latestProject.Description</p>
        <label>Startdatum: </label>
        <p>@latestProject.StartDate</p>
        <label>Slutdatum: </label>
        <p>@latestProject.EndDate</p>
            <a asp-controller="Project" asp-action="ProjectInfo" asp-route-projectID="@latestProject.ProjectID"><button>Visa projektet</button></a>
        </div>
    }

</div>




